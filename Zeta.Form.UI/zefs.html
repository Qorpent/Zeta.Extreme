<!DOCTYPE html>
<html>
<head>
    <title>...</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <script src="scripts/dateformat.js" type="text/javascript"></script>
    <script src="scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="scripts/jquery-ui.min.js" type="text/javascript"></script>
    <script src="scripts/bootstrap.js" type="text/javascript"></script>
    <script src="scripts/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="scripts/jquery.number.min.js" type="text/javascript"></script>
    <script src="scripts/stopparentscroll.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="styles/zefs-print.css">
    <link rel="stylesheet" type="text/css" href="styles/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="styles/bootstrap-responsive.min.css">
    <!--<link rel="stylesheet" type="text/css" href="styles/font-awesome.min.css">-->
    <link rel="stylesheet" type="text/css" href="styles/zefs-forms.css">
    <link rel="stylesheet" type="text/css" href="styles/zeta.css">
    <link rel="stylesheet" type="text/css" href="styles/zefs.css">
    <link rel="stylesheet" type="text/css" href="styles/zefs-attacher.css">
    <link rel="stylesheet" type="text/css" href="styles/zefs-chat.css">
    <link rel="stylesheet" type="text/css" href="styles/zeta-floatmenu.css">

    <script src="scripts/loaders.js" type="text/javascript"></script>
    <script src="scripts/jsonformatter.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="styles/jsformatter.css">

    <script type="text/javascript">
        var useStatic = true;

        (function() {
            var global = window.loadBalancer = this;
            var serversMap = [
                {
                    'host' : 'ugmk-as2.ugmk.com',
                    'protocol' : 'https',
                    'load' : undefined
                },

                {
                    'host' : 'ugmk-as5.ugmk.com',
                    'protocol' : 'https',
                    'load' : undefined
                },

                {
                    'host' : 'ugmk-sccm2.ugmk.com',
                    'protocol' : 'https',
                    'load' : undefined
                }
            ];

            this.getMostFreeServer = function() {
                var sa = new Array();

                for(i = 0; i < serversMap.length; i++) {
                    zefsNodeloadUrl = serversMap[i].protocol + '://' + serversMap[i].host + '/zefs/zefs/nodeload.json.qweb';

                    $.ajax(
                        {
                            url : zefsNodeloadUrl,
                            type : 'GET',
                            dataType: 'json',
                            timeout : 20000,
                            success : function(json) {
                                serversMap[i].load.zefs = json;
                                sa[i] = json.Availability;
                            }
                        }
                    ).error(
                        function() {

                        }
                    );
                }


               // return serversMap[sa.indexOf(sa.max())];
            };

            $(document).ready(
                function() {
                    global.getMostFreeServer();
                    
                }
            );
        })();
    </script>
</head>
<body>
</body>
</html>